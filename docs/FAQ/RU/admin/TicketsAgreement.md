---
title: Согласование заявок
description:
keywords:  hubex, хабекс, хубекс, хабикс
---

#### Согласование заявок
В этом разделе вы узнаете:
<html>
<meta charset="utf-8">
<ul>
    <li><a href="#customeragreement">Как настроить стадии и жизненный цикл для согласования заявок</a>;</li>
    <li><a href="#message">Как настроить оповещения о согласовании</a>;</li>
    <li><a href="#mobile">Как выглядит процесс согласования в web приложении</a>.</li>
</ul>
</html>
<body>

<p>Согласование заявок - это способ контролировать выполнение какого-либо действия. Согласование может быть внутренним и
    внешним. Ко внешнему согласованию относится, например, подтверждение заказчиком выполненных работ по
    <strong>Заявке</strong>. Ко
    внутреннему согласованию можно отнести контроль над внутренними раходами ресурсов (финансовых, трудовых,
    материальных и т.д.).</p>
<p> Ежедневные расходы организаций могут исчисляться сотнями тысяч и даже миллионами рублей. Выполняя ремонтные работы,
    предприятия нуждаются в постоянном пополнении материальных запасов. Конечно, такие заявки могут обходиться и без
    согласования.
    Но пропуская процедуру контроля, мы получаем нецелевое использование денежных
    средств, излишки запасов на складах, ошибки исполнения задач и т.д.</p>


<p>В системе HubEx раелизован удобный функционал согласования - вы можете настроить параллельное
    согласование несколькими лицами, можете использовать последовательное согласования, а также передавать
    информацию о согласованных заявках в 1С системы (с помощью интеграции).</p>

<p>Используя согласование внутренних <strong>Заявок</strong>, вы получаете:</p>
<ul>
    <li>повышенный уровень контроля за различными подразделениями;</li>
    <li>снижение финансовых рисков, связанны с необдуманными тратами, получением несвоевременной информации;</li>
    <li>повышение уровня коммуникации между сотрудниками и подразделениями внутри организации.</li>
</ul>

<h5>Как работает согласование HubEx?</h5>
<ol>
    <li>вы создаете внутреннюю <strong>Заявку</strong> (на расходование денежных средств, на оплату счета, закупку ТМЦ и
        т.д.) и переводите
        ее на стадию <strong>Согласование заявки</strong>;
    </li>
    <li>ответственный за согласование (это может быть руководитель, начальник подразделения, ответственный за
        направление бизнеса и т.д.) получает уведомление о необходимости согласовать <strong>Заявку</strong> и принимает
        решение о
        подтверждении или возврате <strong>Заявки</strong> инициатору;
    </li>
    <li>далее он либо согласует, либо отклоняет заявку и назначает иницатора;</li>
    <li>инициатор заявки получает уведомление о согласованнии, либо возврате на него <strong>Заявки</strong>.</li>
</ol>
<p>В рамках этой процедуры может быть организовано параллельное согласование, когда два или более ответственных лиц со
    своей стороны смогут проверить <strong>Заявку</strong> и обозначить свое решение относительно нее.</p>

<p id="settings">Что необходимо сделать в HubEx для настройки такой процедуры? Чтобы организовать согласование
    необходимо провести ряд
    настроек в консоли администратора: </p>
<ol>
    <li>для <strong>Заявкок</strong> разного типа (для оплаты, для закупки и т.д.) могут быть определены
        разные этапы
        прохождения (разные
        бизнес-процессы). Под разные процессы вы можете создавать разные <strong>Типы заявок</strong>. Если все
        внутренние <strong>Заявки</strong>
        проходят одинаковые этапы, то достаточно будет одного <strong>Типа заявки</strong>, который будет определять их
        жизненный цикл;
    </li>
    <li>создать необходимые стадии <strong>Заявки</strong> для согласования; <!--, в пару к стадиям также необходимо создать
        статусы. Стадии отображаются в web-приложении, статусы - в web-приложении и в мобильном приложении заказчика.
        Подробнее читайте в статье: <a href="https://wiki.hubex.ru/docs/FAQ/RU/admin/StageVSStatus.html">Чем отличаются
            Стадии заявки от Статусов заявки?</a>-->
    </li>
    <li>настроить жизненный цикл;</li>
    <li>настроить получение уведомлений.</li>
</ol>

<p>В рамках данной статьи будут рассмотрены настройки для двух видов согласования: <a href="#simple">линейное
    (простое)</a> с одним
    согласующим и <a href="#parallel">парарллельное</a> с двумя согласующими лицами.</p>

<h5 id="simple">Линейное согласование</h5>

<p>Возьмем один из самых популярных бизнес-процессов - закупку ТМЦ. Сотрудники подразделения
    создают <strong>Заявки</strong> на закупку
    ТМЦ, но перед непосредственной закупкой эти <strong>Заявки</strong> должны быть одобрены ответственным по закупкам
    (это может быть руководитель организации, начальник отдела закупок и другое ответственное лицо). Процесс, включающий
    в себя согласование, представлен на схеме ниже. Такую
    схему можно взять за основу для любых процессов, включающих согласование, а также для дальнейших настроек HubEx.
</p>

<div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Simple.jpg"/>
</div>

<p>Отрисовка такой схемы является подготовительным этапом перед <a href="#settings">настройкой процедуры
    согласования</a> - из нее мы четко видим
    процесс, можем выделить Стадии заявки, понять настройку жизненного цикла и увидеть, на каких Стадиях и кому должны
    приходить
    уведомления.</p>
<p>Теперь пройдемся по консоли администратора и настроим согласование в HubEx.</p>


<h5 id="">Тип заявки</h5>

<p>Мы будем использовать отдельный <strong>Тип заявки</strong> для настройки конкретного процесса - закупки ТМЦ.</p>
<p>Новый тип можно создать в меню
    консоли администратора <strong>Настройки заявки - Типы заявок</strong>. Назовем его <strong>Закупка ТМЦ</strong>.
    Подробнее
    читайте в стате: <a href="https://wiki.hubex.ru/docs/FAQ/RU/admin/TicketType.html">Типы заявок</a>.</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 60%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Type.jpg"/>
</div>

<p>Обратите внимание! Если вы используете <strong>Участки</strong>, их необходимо указывать при создании <strong>Типа
    заявки</strong>. Подробнее
    читайте в статях: <a href="https://wiki.hubex.ru/docs/FAQ/RU/admin/Places.html">Настройка участков</a>, <a
            href="https://wiki.hubex.ru/docs/FAQ/RU/admin/TicketType.html">Типы заявок</a>. </p>

<h5 id="customeragreement">Стадии заявки и настройка жизненного цикла</h5>
<p>В рамках данного примера считается, что стадии <strong>Новая</strong>, <strong>Выполнена</strong> и
    <strong>Закрыта</strong> уже были созданы.</p>
<p>Для настройки согласования вам потребуется создать три новые стадии
    (если они не были созданы ранее) в меню
    консоли администратора <strong>Настройки заявки - Стадии заявки</strong>. Задайте стадиям различные цвета:</p>
<ul>
    <li>первую стадию назовем
        <strong>Согласование заявки</strong> - это стадия, на которую будет переводиться
        <strong>Заявка</strong>
        после ее создания (со стадии Новая на стадию Согласование заявки). Далее при переходе на эту стадию мы также
        настроим в
        отправку уведомления ответственному лицу о необходимости согласовать <strong>Заявку</strong>;
    </li>
    <p>
    <div>
        <img style="margin: 0 auto; display: block; max-width: 60%;"
             src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Stage1.jpg"/>
    </div>
    </p>
    <li><strong>Согласована</strong> - если <strong>Заявка</strong> отвечает всем требованиям ответственного за
        согласование, то он
        переводит ее на эту стадию. В настройке жизненного цикла переход на эту стадию мы сделаем доступным только для
        роли, принадлежащей ответственному;

    </li>
    <p>
    <div>
        <img style="margin: 0 auto; display: block; max-width: 60%;"
             src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Stage2.jpg"/>
    </div>
    </p>
    <li><strong>Не согласована</strong> - если ответственный отказывается
        подтверждать <strong>Заявку</strong>, он
        переводит ее на эту стадию. В настройке жизненного цикла переход на эту стадию мы сделаем доступным также только
        для
        роли, принадлежащей ответственному.
    </li>
    <p>
    <div>
        <img style="margin: 0 auto; display: block; max-width: 60%;"
             src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Stage3.jpg"/>
    </div>
    </p>
</ul>

<!--<p>В паре к каждой стадии необходимо в меню консоли администрирования <strong>Настройки заявки - Статусы заявки</strong>
    создать
    необходимые статусы - <strong>Согласование заявки</strong>, <strong>Согласована</strong>, <strong>Не
        согласована</strong>. Подробнее читайте в статьях: <a
            href="https://wiki.hubex.ru/docs/FAQ/RU/admin/StageVSStatus.html">Чем отличаются
        Стадии заявки от Статусов заявки?</a>, <a
            href="https://wiki.hubex.ru/docs/FAQ/RU/admin/StatusType.html">Статусы заявок</a>.</p>
<p>Для каждого статуса задайте свой цвет. Название и цвет <strong>Статусов заявки</strong> для данного примера может
    совпадать с названием и цветом <strong>Стадий заявки</strong>.</p>
<p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 60%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Status1.jpg"/>
</div>
</p>
<p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 60%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Status2.jpg"/>
</div>
</p>
<p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 60%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Status3.jpg"/>
</div>
</p>-->

<p>Для настройки переходов по стадиям необходимо настроить жизненный цикл заявки.</p>

<p>Сделать это можно в меню <strong>Настройки заявки - Жизненный цикл заявки</strong>: </p>
<ul>
    <li>в поле <strong>Тип заявки</strong> выберите созданный ранее тип <strong>Закупка ТМЦ</strong>;
    </li>
    <li>для маршрута укажите начальную стадию Новая, конечную стадию Закрыта. Эти стадии должны быть заранее созданы.
        Подробнее читайте в статье: <a href="https://wiki.hubex.ru/docs/FAQ/RU/admin/TicketLifeCycle.html">Жизненный
            цикл заявки</a>;
    </li>
    <li>со стадии <strong>Новая</strong> в настройках переходов между стадиями по кнопке <strong>+Добавить
        стадию</strong> добавьте
        переход на стадию <strong>Согласование заявки</strong>;
    </li>
    <li>в поле <strong>Название перехода</strong> укажите <strong>На согласовании</strong>. <strong>Название
        перехода</strong> - название кнопки в мобильном
        приложении инженера;
    </li>
    <li>в поле <strong>Ветка жизненного цикла</strong> выберите <strong>Ветка согласования</strong>. Заявки на ветке
        согласования будут отображаться в отдельно вкладке в мобильном приложении;
    </li>
    <li>в настройках перехода также можно установить флажок <strong>Выполнить автоматический переход</strong> и задать
        время перехода, например, 5 минут.
        Благодаря этой настройке <strong>Заявка</strong> автоматически через 5 минут перейдет на стадию <strong>Согласование
            заявки</strong>. Далее при переходе на эту стадию мы также настроим в
        отправку уведомления ответственному лицу о необходимости согласовать <strong>Заявку</strong>;
    </li>
    <div>
        <img style="margin: 0 auto; display: block; max-width: 90%;"
             src="/attachments/images/FAQ/ADMIN/TicketsAgreement/LC1.jpg"/>
    </div>

    <li>нажмите кнопку <strong>Сохранить</strong>;</li>
    <li>затем у стадии <strong>Согласование заявки</strong> нажмите кнопку <strong>Далее</strong> и добавьте переходы на
        стадии <strong>
            Согласована</strong> и <strong>Не согласована</strong> с
        соответствующими названиями переходов;
    </li>
    <li>В поле <strong>Ветка жизненного цикла заявки</strong> для этих стадий можно выбрать значение <strong>Основная
        ветка</strong>. Так как дальше с <strong>Заявкой</strong> будет работать инициатор: выполнять/изменять и т.д.

        <p>Обратите внимание! Здесь мы не настраиваем автоматический переход. Переводить <strong>Заявку</strong> на эти
            стадии пользователь будет вручную.</p>
    </li>
    <div>
        <img style="margin: 0 auto; display: block; max-width: 90%;"
             src="/attachments/images/FAQ/ADMIN/TicketsAgreement/LC2.jpg"/>
    </div>

    <li>установите флажок <strong>Предоставить доступ отдельным ролям</strong> и укажите роль <strong>
        Ответственный по закупкам</strong>, т.к. обе эти стадии должны быть доступны
        только для ответственного за согласование. Роль вы можете выбрать другую, в зависимости от уже созданных в вашем
        тенанте Ролей - это может быть Руководитель, Начальник отдела и т.д. Выбранная Роль должна быть указана в
        карточке пользователя - того самого ответственного, который будет согласовать ваши Заявки. Подробнее читайте в
        статьях: <a href="https://wiki.hubex.ru/docs/FAQ/RU/admin/Roles.html">Настройка ролей</a>, <a
                href="https://wiki.hubex.ru/docs/FAQ/RU/user/CreatingUser.html">Создание пользователя вашей системы</a>.
    </li>
    <div>
        <img style="margin: 0 auto; display: block; max-width: 90%;"
             src="/attachments/images/FAQ/ADMIN/TicketsAgreement/LC3.jpg"/>
    </div>
    <p>
    <div>
        <img style="margin: 0 auto; display: block; max-width: 90%;"
             src="/attachments/images/FAQ/ADMIN/TicketsAgreement/LC4.jpg"/>
    </div>
    </p>


</ul>
<p>Вы можете настроить дальнейшие переходы со стадий <strong>Согласована</strong> на <strong>Выполнена</strong> и далее
    - <strong>Закрыта</strong>, со стадии
    <strong>Не согласована</strong>,
    например, на стадию <strong>Закрыта</strong> или <strong>На согласовании</strong> - для повторного согласования,
    после внесения изменений.</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 90%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/LC5.jpg"/>
</div>

<h5 id="message">Настройка оповещений</h5>
<p>Для простой схемы согласования можно настроить уведомления на трех стадиях: </p>
<ul>
    <li>Согласование заявки - на этой стадии можно отправить уведомление согласующему о том, что ему необходимо
        согласовать Заявку;
    </li>
    <li>Согласована - на этой стадии можно отправить уведомление инициатору Заявки о том, что она успешно согласована;
    </li>
    <li>Не согласована - на этой стадии можно отправить уведомление также инициатору Заявки об отказе в согласовании.
    </li>
</ul>

<p>Сначала настроим оповещение для ответственного по закупкам о том, что
    <strong>Заявку</strong> необходимо согласовать. Уведомление может прийти по электронной почте или в виде
    push-уведомления
    на телефон.</p>
<p>Перейдите в меню консоли <strong>Настройка оповещений - Правила выбора получателя</strong>. Создайте новое правило с
    названием
    <strong>Уведомление о согласовании для ответственного по закупкам</strong>. В поле <strong>Роль</strong>, которая
    получит уведомление выберите
    <strong>Ответственный по закупкам</strong> и сохраните правило.</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 60%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Rules.jpg"/>
</div>

<p>Далее перейдите в меню <strong>Настройки оповещений - Триггеры уведомлений</strong>. Здесь настраивается условия
    получения уведомления
    и шаблон сообщения:</p>
<ul>
    <li>в <strong>Названии триггера</strong> напишите, например, <strong>Согласование ответственным по закупкам
        (email)</strong>;
    </li>
    <li>в поле <strong>Описание сообщения</strong> можно выбрать вариант шаблона, по которому будет составлен <strong>Заголовок
        сообщения</strong> и <strong>Текст сообщения</strong> в специальной разметке. Например, <strong>Уведомление о
        созданной заявке (Email)</strong>;
    </li>
    <li>в <strong>Заголовке сообщения</strong> подставится текст "Заявка №@Model.TaskNumber" (без кавычек);</li>
    <li>в поле <strong>Текст сообщения</strong> вы увидите текст в специальной разметке, в котором текстовые фразы можно
        изменить на свои - Требуется согласование заявки и т.д. (вы можете скопировать текст сообщения из этого примера
        без кавычек) "&lt;table style="width: 650px; max-height: 300px;"&gt;
        &lt;tbody&gt;
        &lt;tr&gt;
        &lt;td&gt; &lt;p>Здравствуйте!&lt;/p&gt;
        &lt;p&gt;Требуется согласование заявки &lt;b&gt;№@Model.TaskNumber&lt;/b&gt; по объекту &lt;b&gt;@Model.AssetFullName&lt;/b&gt;.
        &lt;/p&gt;
        &lt;p&gt;Описание заявки:&lt;/p&gt;
        &lt;p&gt;@Model.TaskNotes.&lt;/p&gt;
        &lt;p&gt;Откройте заявку по ссылке @Model.NavigateToTaskForm().&lt;/p&gt;
        &lt;p style="margin-top: 20px; margin-bottom: 7px;"&gt;C уважением, Hubex&lt;/p&gt;&lt;a
        href="https://hubex.ru">&lt;img
        src="https://content.screencast.com/users/echinaek.val/folders/Capture/media/19d10631-5cd0-4726-9dce-9164f197fab9/LWR_Recording.png"
        alt="HubEx"/&gt;&lt;/a&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;/tbody&gt;
        &lt;/table&gt;";
    </li>

    <li>в поле <strong>Способ отправки сообщения</strong> выберите <strong>Email</strong>;</li>
    <li>в блоке <strong>Условия отправки</strong> в поле <strong>Стадии заявки</strong>, на которых будет отправлено
        уведомление выберите стадию
        <strong>Согласование заявки</strong> и установите флажки отправки по времени;
    </li>
    <li>добавьте правило выбора получателя, которое мы создали выше - <strong>Уведомление о согласовании для
        ответственного по закупкам</strong> и
        сохраните настройку
        триггера.
    </li>
</ul>
<div>
    <img style="margin: 0 auto; display: block; max-width: 90%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Triggers.jpg"/>
</div>

<p>После согласования или отклонения согласования инициатор заявки должен получить уведомление о принятом решении. Для
    этого необходимо созать новое <strong>Правило выбора получателя</strong> и два новых <strong>Триггера
        уведомлений</strong> (для стадий <strong>Согласована</strong> и
    <strong>Не согласована</strong>).</p>

<p>Обратите внимание! ФИО пользователя, инициирующего подачу Заявки, отображается в Заявке, в блоке Детальная информация
    - поле Иниициатор заявки. Доступ к полю может быть скрыт с помощью настройки доступа к полям в меню консоли
    администрирования Настройки заявки - Поля на форме заявки. Подробнее читайте в статье: <a
            href="https://wiki.hubex.ru/docs/FAQ/RU/admin/ElementsOfInterface.html">Поля на форме заявки: настройка
        доступа к полям заявки</a></p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 60%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Initiator.jpg"/>
</div>


<p>Для правила выбора установите название, например, <strong>Уведомление об итогах согласования для инициатора</strong>.
    В
    поле <strong>Получатели уведомления</strong> укажите параметр <strong>Обратившийся пользователь</strong> - т.е.
    инициатор подачи Заявки.
</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 60%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Rules2.jpg"/>
</div>


<p>Также создаем новые <strong>Триггеры уведомлений</strong>. Для стадий
    <strong>Согласована</strong> и <strong>Не согласована</strong> нужно создать разные триггеры с разным текстом о
    результатах согласования и указать соответствующие стадии в настройках.</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 90%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Triggers2.jpg"/>
</div>

<p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 90%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Triggers3.jpg"/>
</div>
</p>


<h5 id="parallel">Параллельное согласование</h5>
<p>В параллельном согласовании участвуют несколько согласующих лиц. Для примера рассмотрим вариант с двумя согласующими
    для процесса закупки ТМЦ. Сотрудники подразделения
    создают <strong>Заявки</strong> на закупку
    ТМЦ, но перед непосредственной закупкой эти <strong>Заявки</strong> должны быть одобрены ответственным по закупкам
    (это может быть руководитель организации, начальник отдела закупок и другое ответственное лицо) и начальником
    подразделения (начальником цеха, руководителем организации). Процесс, включающий
    в себя параллельное согласование, представлен на схеме ниже. Данная схема отрисована с учетом настроек в HubEx.
</p>

<div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Parallel.jpg"/>
</div>

<p>Обратите внимание на стадии со звездочкой: этапы процесса Согласована ответственным по закупкам* и Согласована ответственным по закупкам - одинаковые по
        смыслу, но в
        HubEx необходимо создать именно две разных стадии. Обе стадии предназначены для одного согласующего лица, но на
        разных ветках процесса для этих стадий должны быть настроены разные уведомления. Также в зависимости от
        местонахождения стадии в процессе, они имеют разные точки выхода - продолжение процедуры согласования или ее
    завершение.</p>

<p>Тоже самое касается и этапов Согласована начальником подразделения* и Согласована начальником подразделения.</p>


<p>Отрисовка такой схемы является подготовительным этапом перед <a href="#settings2">настройкой процедуры параллельного
    согласования</a> - из нее мы четко видим
    процесс, можем выделить Стадии заявки, понять настройку жизненного цикла и увидеть, на каких Стадиях и кому должны
    приходить
    уведомления.</p>
<p>Теперь пройдемся по консоли администратора и настроим паралелльное согласование в HubEx.</p>


<h5 id="">Тип заявки</h5>



<h5 id="mobile">Процесс согласования в web приложении</h5>
<p>Инициатор создает Заявку с типом Закупка оборудования.</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 90%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Ticket.jpg"/>
</div>
<p>Переведите Заявку на стадию <strong>Согласование с руководителем</strong>. </p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 90%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Ticket2.jpg"/>
</div>

<p>Руководитель при этом получит сообщение на электронную почту в формате, который вы указали в настроках триггера.</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 80%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Email.jpg"/>
</div>
<p>Руководитель заходит под своей учетной записью, находит Заявку и переводит ее либо на стадию Согласована, либо Не
    согласована. И назначает в качестве исполнителя инициатора Заявки, который так же получит уведомление о
    результатах согласования.</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 90%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Ticket3.jpg"/>
</div>
</body>


____
- [Перейти в меню](http://wiki.hubex.ru)
