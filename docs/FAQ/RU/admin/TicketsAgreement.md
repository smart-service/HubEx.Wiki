---
title: Согласование заявок
description:
keywords:  hubex, хабекс, хубекс, хабикс
---

#### Согласование заявок
В этом разделе вы узнаете:
<html>
<meta charset="utf-8">
<ul>
    <li><a href="#simple">Что такое линейное согласование</a>;</li>
    <li><a href="tickettype1">Как создать тип заявки для линейного согласования</a>;</li>
    <li><a href="#customeragreement1">Как настроить стадии и жизненный цикл для линейного согласования заявок</a>;</li>
    <li><a href="#message1">Как настроить оповещения для линейного согласования</a>;</li>
    <li><a href="#web1">Как выглядит линейное согласование в web-приложении</a>;</li>
    <li><a href="#parallel">Что такое параллельное согласование</a>;</li>
    <li><a href="tickettype2">Как создать тип заявки для параллельного согласования</a>;</li>
    <li><a href="#customeragreement2">Как настроить стадии и жизненный цикл для параллельного согласования заявок</a>;
    </li>
    <li><a href="#message2">Как настроить оповещения для параллельного согласования</a>;</li>
    <li><a href="#web2">Как выглядит параллельное согласование в web-приложении</a>.</li>
</ul>
</html>
<body>

<p>Согласование заявок - это способ контролировать выполнение процессов. Согласование может быть внутренним и
    внешним. Ко внешнему согласованию относится, например, подтверждение заказчиком выполненных работ по
    <strong>Заявке</strong>. Ко
    внутреннему согласованию можно отнести контроль над внутренними раходами ресурсов (финансовых, трудовых,
    материальных и т.д.).</p>
<p> Ежедневные расходы организаций могут исчисляться сотнями тысяч и даже миллионами рублей. Выполняя ремонтные работы,
    предприятия нуждаются в постоянном пополнении материальных запасов. Конечно, такие заявки могут обходиться и без
    согласования.
    Но пропуская процедуру контроля, мы получаем нецелевое использование денежных
    средств, излишки запасов на складах, ошибки исполнения задач и т.д.</p>


<p>В системе HubEx реализован удобный функционал согласования - вы можете настроить параллельное
    согласование несколькими лицами, можете использовать последовательное согласования, а также передавать
    информацию о согласованных заявках в 1С системы (с помощью интеграции).</p>

<p>Внедрив процесс согласования внутренних <strong>Заявок</strong>, вы получите:</p>
<ul>
    <li>повышенный уровень контроля за различными подразделениями;</li>
    <li>снижение финансовых рисков, связанны с необдуманными тратами, получением несвоевременной информации;</li>
    <li>повышение уровня коммуникации между сотрудниками и подразделениями внутри организации.</li>
</ul>

<h5>Как работает согласование HubEx?</h5>
<ol>
    <li>вы создаете внутреннюю <strong>Заявку</strong> (на расходование денежных средств, на оплату счета, закупку ТМЦ и
        т.д.) и переводите
        ее на стадию <strong>Согласование заявки</strong>;
    </li>
    <li>ответственный за согласование (это может быть руководитель, начальник подразделения, ответственный за
        направление бизнеса и т.д.) получает уведомление о необходимости согласовать <strong>Заявку</strong> и принимает
        решение о
        подтверждении или возврате <strong>Заявки</strong> инициатору;
    </li>
    <li>далее он либо согласует, либо отклоняет заявку;</li>
    <li>инициатор заявки получает уведомление о согласованнии, либо возврате на него <strong>Заявки</strong>.</li>
</ol>

<p>В рамках этой процедуры может быть организовано параллельное согласование, когда два или более ответственных лиц со
    своей стороны смогут проверить <strong>Заявку</strong> и обозначить свое решение относительно нее.</p>

<p id="settings">Что необходимо сделать в HubEx для настройки такой процедуры? Чтобы организовать согласование
    необходимо провести ряд
    настроек в консоли администратора: </p>
<ol>
    <li>для <strong>Заявок</strong> разного типа (для оплаты, закупки и т.д.) могут быть определены
        разные этапы
        прохождения (бизнес-процессы). Под каждый процесс вы можете создавать свой <strong>Тип заявки</strong>. Если все
        внутренние <strong>Заявки</strong>
        проходят одинаковые этапы, то достаточно будет одного <strong>Типа заявки</strong>, который будет определять их
        жизненный цикл;
    </li>
    <li>создать необходимые  <strong>Стадии заявки</strong> для согласования; <!--, в пару к стадиям также необходимо создать
        статусы. Стадии отображаются в web-приложении, статусы - в web-приложении и в мобильном приложении заказчика.
        Подробнее читайте в статье: <a href="https://wiki.hubex.ru/docs/FAQ/RU/admin/StageVSStatus.html">Чем отличаются
            Стадии заявки от Статусов заявки?</a>-->
    </li>
    <li>настроить жизненный цикл;</li>
    <li>настроить получение уведомлений.</li>
</ol>

<p>В рамках данной статьи будут рассмотрены настройки для двух видов согласования: <a href="#simple">линейное
    (простое)</a> с одним
    согласующим и <a href="#parallel">парарллельное</a> с двумя согласующими лицами.</p>

<h5 id="simple">1. Линейное согласование</h5>

<p>Возьмем один из самых популярных бизнес-процессов - закупку ТМЦ. Сотрудники подразделения
    создают <strong>Заявки</strong> на закупку
    ТМЦ, но перед непосредственной закупкой эти <strong>Заявки</strong> должны быть одобрены ответственным по закупкам
    (это может быть руководитель организации, начальник отдела закупок и другое ответственное лицо). Процесс, включающий
    в себя согласование, представлен на схеме ниже. Такую
    схему можно взять за основу для любых процессов, включающих согласование, а также для дальнейших настроек HubEx.
</p>

<div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Simple.jpg"/>
</div>

<p>Отрисовка такой схемы является подготовительным этапом перед <a href="#settings">настройкой процедуры
    согласования</a> - из нее мы четко видим
    процесс, можем выделить <strong>Стадии заявки</strong>, понять настройку жизненного цикла и увидеть, на каких <strong>Стадиях заявок</strong> и кому должны
    приходить
    уведомления.</p>
<p>Теперь пройдемся по консоли администратора и настроим согласование в HubEx.</p>


<h5 id="tickettype1">1.1. Тип заявки для линейного согласования</h5>

<p>Мы будем использовать отдельный <strong>Тип заявки</strong> для настройки конкретного процесса - закупки ТМЦ.</p>
<p>Новый тип можно создать в меню
    консоли администратора <strong>Настройки заявки - Типы заявок</strong>. Назовем его <strong>Закупка ТМЦ</strong>.
    Подробнее
    читайте в стате: <a href="https://wiki.hubex.ru/docs/FAQ/RU/admin/TicketType.html">Типы заявок</a>.</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 60%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Type.jpg"/>
</div>

<p>Обратите внимание! Если вы используете <strong>Участки</strong>, их необходимо указывать при создании <strong>Типа
    заявки</strong>. Подробнее
    читайте в статях: <a href="https://wiki.hubex.ru/docs/FAQ/RU/admin/Places.html">Настройка участков</a>, <a
            href="https://wiki.hubex.ru/docs/FAQ/RU/admin/TicketType.html">Типы заявок</a>. </p>

<h5 id="customeragreement1">1.2. Стадии заявки и настройка жизненного цикла для линейного согласования</h5>
<p>В рамках данного примера считается, что стадии <strong>Новая</strong>, <strong>Выполнена</strong> и
    <strong>Закрыта</strong> уже были созданы.</p>
<p>Для настройки согласования вам потребуется создать три новые стадии
    (если они не были созданы ранее) в меню
    консоли администратора <strong>Настройки заявки - Стадии заявки</strong>. Задайте стадиям различные цвета:</p>
<ul>
    <li>первую стадию назовем
        <strong>Согласование заявки</strong> - это стадия, на которую будет переводиться
        <strong>Заявка</strong>
        после ее создания (со стадии <strong>Новая</strong> на стадию <strong>Согласование заявки</strong>). Далее при
        переходе на эту стадию мы также
        настроим в
        отправку уведомления ответственному лицу о необходимости согласовать <strong>Заявку</strong>;
    </li>
    <p>
    <div>
        <img style="margin: 0 auto; display: block; max-width: 60%;"
             src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Stage1.jpg"/>
    </div>
    </p>
    <li><strong>Согласована</strong> - если <strong>Заявка</strong> отвечает всем требованиям ответственного за
        согласование, то он
        переводит ее на эту стадию. В настройке жизненного цикла переход на эту стадию мы сделаем доступным только для
        <strong>Роли</strong>, принадлежащей ответственному;

    </li>

    <p>
    <div>
        <img style="margin: 0 auto; display: block; max-width: 60%;"
             src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Stage2.jpg"/>
    </div>
    </p>

    <li><strong>Не согласована</strong> - если ответственный отказывается
        подтверждать <strong>Заявку</strong>, он
        переводит ее на эту стадию. В настройке жизненного цикла переход на эту стадию мы сделаем доступным также только
        для
        <strong>Роли</strong>, принадлежащей ответственному.
    </li>
    <p>
    <div>
        <img style="margin: 0 auto; display: block; max-width: 60%;"
             src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Stage3.jpg"/>
    </div>
    </p>
</ul>

<!--<p>В паре к каждой стадии необходимо в меню консоли администрирования <strong>Настройки заявки - Статусы заявки</strong>
    создать
    необходимые статусы - <strong>Согласование заявки</strong>, <strong>Согласована</strong>, <strong>Не
        согласована</strong>. Подробнее читайте в статьях: <a
            href="https://wiki.hubex.ru/docs/FAQ/RU/admin/StageVSStatus.html">Чем отличаются
        Стадии заявки от Статусов заявки?</a>, <a
            href="https://wiki.hubex.ru/docs/FAQ/RU/admin/StatusType.html">Статусы заявок</a>.</p>
<p>Для каждого статуса задайте свой цвет. Название и цвет <strong>Статусов заявки</strong> для данного примера может
    совпадать с названием и цветом <strong>Стадий заявки</strong>.</p>
<p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 60%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Status1.jpg"/>
</div>
</p>
<p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 60%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Status2.jpg"/>
</div>
</p>
<p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 60%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Status3.jpg"/>
</div>
</p>-->

<p>Для настройки переходов по стадиям необходимо настроить жизненный цикл заявки.</p>

<p>Сделать это можно в меню <strong>Настройки заявки - Жизненный цикл заявки</strong>: </p>
<ul>
    <li>в поле <strong>Тип заявки</strong> выберите созданный ранее тип <strong>Закупка ТМЦ</strong>;
    </li>
    <li>для маршрута укажите начальную стадию <strong>Новая</strong>, конечную стадию <strong>Закрыта</strong>. Эти
        стадии должны быть заранее созданы.
        Подробнее читайте в статье: <a href="https://wiki.hubex.ru/docs/FAQ/RU/admin/TicketLifeCycle.html">Жизненный
            цикл заявки</a>;
    </li>
    <li>со стадии <strong>Новая</strong> в настройках переходов между стадиями по кнопке <strong>+Добавить
        стадию</strong> добавьте
        переход на стадию <strong>Согласование заявки</strong>;
    </li>
    <li>в поле <strong>Название перехода</strong> укажите <strong>На согласовании</strong>. <strong>Название
        перехода</strong> - название кнопки в мобильном
        приложении инженера;
    </li>
    <li>в поле <strong>Ветка жизненного цикла</strong> выберите <strong>Ветка согласования</strong>. Заявки на ветке
        согласования будут отображаться в отдельно вкладке в мобильном приложении;
    </li>
    <li id="auto">в настройках перехода также можно установить флажок <strong>Выполнить автоматический переход</strong>
        и задать
        время перехода, например, 5 минут.
        Благодаря этой настройке <strong>Заявка</strong> автоматически через 5 минут перейдет на стадию <strong>Согласование
            заявки</strong>.
        Далее при переходе на эту стадию мы также настроим в
        отправку уведомления ответственному лицу о необходимости согласовать <strong>Заявку</strong>;
    </li>
    <p> <div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/LC1.jpg"/>
</div>  </p>

    <li>нажмите кнопку <strong>Сохранить</strong>;</li>
    <li>затем у стадии <strong>Согласование заявки</strong> нажмите кнопку <strong>Далее</strong> и добавьте переходы на
        стадии <strong>
            Согласована</strong> и <strong>Не согласована</strong> с
        соответствующими названиями переходов;
    </li>
    <p> <div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/LC2.jpg"/>
</div>  </p>

    <li>В поле <strong>Ветка жизненного цикла заявки</strong> для этих стадий можно выбрать значение <strong>Основная
        ветка</strong>. Так как дальше с <strong>Заявкой</strong> будет работать инициатор: выполнять/изменять и т.д.

        <p>Обратите внимание! Здесь мы не настраиваем автоматический переход. Переводить <strong>Заявку</strong> на эти
            стадии пользователь будет вручную.</p>
    </li>


    <li>установите флажок <strong>Предоставить доступ отдельным ролям</strong> и укажите роль <strong>
        Ответственный по закупкам</strong>, т.к. обе эти стадии должны быть доступны
        только для ответственного за согласование. Роль вы можете выбрать другую, в зависимости от уже созданных в вашем
        тенанте ролей - это может быть <strong>Руководитель</strong>, <strong>Начальник подразделения</strong> и т.д.
        Выбранная <strong>Роль</strong> должна быть указана в
        карточке пользователя - того самого ответственного, который будет согласовать <strong>Заявки</strong>. Подробнее
        читайте в
        статьях: <a href="https://wiki.hubex.ru/docs/FAQ/RU/admin/Roles.html">Настройка ролей</a>, <a
                href="https://wiki.hubex.ru/docs/FAQ/RU/user/CreatingUser.html">Создание пользователя вашей системы</a>.
    </li>
    <p> <div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/LC3.jpg"/>
</div></p>

    <p>
    <div>
        <img style="margin: 0 auto; display: block; max-width: 95%;"
             src="/attachments/images/FAQ/ADMIN/TicketsAgreement/LC4.jpg"/>
    </div>
    </p>


</ul>
<p>Вы можете настроить дальнейшие переходы со стадий <strong>Согласована</strong> на <strong>Выполнена</strong> и далее
    - <strong>Закрыта</strong>, со стадии
    <strong>Не согласована</strong>,
    например, на стадию <strong>Закрыта</strong> или <strong>Согласование заявки</strong> - для повторного согласования,
    после внесения изменений.</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 91%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/LC5.jpg"/>
</div>

<h5 id="message1">1.3. Настройка оповещений для линейного согласования</h5>
<p>Для простой схемы согласования можно настроить уведомления на трех стадиях: </p>
<ul>
    <li><strong>Согласование заявки</strong> - на этой стадии можно отправить уведомление согласующему о том, что ему
        необходимо
        согласовать <strong>Заявку</strong>;
    </li>
    <li><strong>Согласована</strong> - на этой стадии можно отправить уведомление инициатору <strong>Заявки</strong> о
        том, что она успешно согласована;
    </li>
    <li><strong>Не согласована</strong> - на этой стадии можно отправить уведомление также инициатору
        <strong>Заявки</strong> об отказе в согласовании.
    </li>
</ul>

<p id="trigger1">Сначала настроим оповещение для ответственного за согласование о том, что
    <strong>Заявку</strong> необходимо согласовать. Уведомление может прийти по электронной почте или в виде
    push-уведомления
    на телефон. </p>
<p>Перейдите в меню консоли <strong>Настройка оповещений - Правила выбора получателя</strong>. Создайте новое правило с
    названием
    <strong>Уведомление о согласовании для ответственного по закупкам</strong>. В поле <strong>Роль</strong>, которая
    получит уведомление выберите
    <strong>Ответственный по закупкам</strong> и сохраните правило.</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 60%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Rules.jpg"/>
</div>

<p>Далее перейдите в меню <strong>Настройки оповещений - Триггеры уведомлений</strong>. Здесь настраивается условия
    получения уведомления
    и шаблон сообщения:</p>
<ul>
    <li>в <strong>Названии триггера</strong> напишите, например, <strong>Согласование ответственным по закупкам
        (email)</strong>;
    </li>
    <li>в поле <strong>Описание сообщения</strong> можно выбрать вариант шаблона, по которому будет составлен <strong>Заголовок
        сообщения</strong> и <strong>Текст сообщения</strong> в специальной разметке. Например, <strong>Уведомление о
        созданной заявке (Email)</strong>;
    </li>
    <li>в <strong>Заголовке сообщения</strong> подставится текст "Заявка №@Model.TaskNumber" (без кавычек);</li>
    <li>в поле <strong>Текст сообщения</strong> вы увидите текст в специальной разметке, в котором текстовые фразы можно
        изменить на свои - Требуется согласование заявки и т.д. (вы можете скопировать текст сообщения из этого примера):
        <p>&lt;table style="width: 650px; max-height: 300px;"&gt;
            &lt;tbody&gt;
            &lt;tr&gt;
            &lt;td&gt; &lt;p>Здравствуйте!&lt;/p&gt;
            &lt;p&gt;Требуется согласование заявки &lt;b&gt;№@Model.TaskNumber&lt;/b&gt; по объекту &lt;b&gt;@Model.AssetFullName&lt;/b&gt;.
            &lt;/p&gt;
            &lt;p&gt;Описание заявки:&lt;/p&gt;
            &lt;p&gt;@Model.TaskNotes.&lt;/p&gt;
            &lt;p&gt;Откройте заявку по ссылке @Model.NavigateToTaskForm().&lt;/p&gt;
            &lt;p style="margin-top: 20px; margin-bottom: 7px;"&gt;C уважением, Hubex&lt;/p&gt;&lt;a
            href="https://hubex.ru">&lt;img
            src="https://content.screencast.com/users/echinaek.val/folders/Capture/media/19d10631-5cd0-4726-9dce-9164f197fab9/LWR_Recording.png"
            alt="HubEx"/&gt;&lt;/a&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;/tbody&gt;
            &lt;/table&gt;
        </p>


    </li>

    <li>в поле <strong>Способ отправки сообщения</strong> выберите <strong>Email</strong> (в рамках данной статьи мы
        будем рассматривать отправку уведомлений на электронную почту, вы можете указать вариант <strong>Push</strong> и получать
        уведомления на мобильный телефон);
    </li>
    <li>в блоке <strong>Условия отправки</strong> в поле <strong>Стадии заявки</strong> выберите стадию
        <strong>Согласование заявки</strong> и установите флажки отправки по времени. Уведомление будет отправляться при переходе <strong>Заявки</strong> на выбранную стадию;
    </li>
    <li>добавьте правило выбора получателя, которое мы создали выше - <strong>Уведомление о согласовании для
        ответственного по закупкам</strong> и
        сохраните настройку
        триггера.
    </li>
</ul>
<div>
    <img style="margin: 0 auto; display: block; max-width: 90%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Triggers.jpg"/>
</div>

<p>Письмо по этому триггеру уведомление придет на почтовый адрес пользователя, чья <strong>Роль</strong> была указана в правиле
    выбора. </p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 80%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Email.jpg"/>
</div>

<p>После согласования или отклонения согласования инициатор <strong>Заявки</strong> должен получить уведомление о принятом решении. Для
    этого необходимо создать новое <strong>Правило выбора получателя</strong> и два новых <strong>Триггера
        уведомлений</strong> (для стадий <strong>Согласована</strong> и
    <strong>Не согласована</strong>).</p>

<p>Обратите внимание! ФИО пользователя, инициирующего подачу <strong>Заявки</strong>, отображается в <strong>Заявке</strong>, в блоке <strong>Детальная информация</strong>
    - поле <strong>Иниициатор заявки</strong>. Доступ к полю может быть скрыт с помощью настройки доступа к полям в меню консоли
    администрирования Настройки заявки - Поля на форме заявки. Подробнее читайте в статье: <a
            href="https://wiki.hubex.ru/docs/FAQ/RU/admin/ElementsOfInterface.html">Поля на форме заявки: настройка
        доступа к полям заявки</a></p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 90%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Initiator.jpg"/>
</div>


<p>Для правила выбора установите название, например, <strong>Уведомление об итогах согласования для инициатора</strong>.
    В
    поле <strong>Получатели уведомления</strong> укажите параметр <strong>Обратившийся пользователь</strong> - т.е.
    инициатор подачи <strong>Заявки</strong>.
</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 60%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Rules2.jpg"/>
</div>


<p>Также создаем новые <strong>Триггеры уведомлений</strong>. Для стадий
    <strong>Согласована</strong> и <strong>Не согласована</strong> нужно создать разные триггеры с разным текстом о
    результатах согласования и указать соответствующие стадии в настройках.</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Triggers2.jpg"/>
</div>

<p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Triggers3.jpg"/>
</div>
</p>

<p>Далее в примере вы наглядно увидите, как выглядит <a href="#email">письмо</a> с одним из результатов согласования.
</p>

<h5 id="web1">1.4. Процесс линейного согласования в web-приложении</h5>
<p>Инициатор создает <strong>Заявку</strong> с типом <strong>Закупка ТМЦ</strong>.</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Ticket.jpg"/>
</div>

<p>Переведите <strong>Заявку</strong> на стадию <strong>Согласование заявки</strong> или дождитесь автоматического перехода (который был
    <a href="#auto">настроен в рамках жизненного цикла</a> для стадии <strong>Согласование заявки</strong>). </p>

<div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Ticket2.jpg"/>
</div>

<p>Ответственный за согласование (с ролью <strong>Ответственный по закупкам</strong>) при этом получит сообщение на электронную почту в
    формате, который мы указали в настроках <a href="trigger1">триггера уведомлений</a>.</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 80%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Email.jpg"/>
</div>
<p>Ответственный за согласование под своей учетной записью открывает <strong>Заявку</strong> и переводит ее либо на стадию <strong>Согласована</strong>,
    либо <strong>Не
        согласована</strong>. </p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Ticket3.jpg"/>
</div>

<p id="email">По результатам согласования инициатор <strong>Заявки</strong> получит сообщение на почту.</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 80%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Email2.jpg"/>
</div>


<h5 id="parallel">2. Параллельное согласование</h5>
<p>В параллельном согласовании участвуют несколько согласующих лиц. Для примера рассмотрим вариант с двумя согласующими
    для процесса закупки ТМЦ. Сотрудники подразделения
    создают <strong>Заявки</strong> на закупку
    ТМЦ, но перед непосредственной закупкой эти <strong>Заявки</strong> должны быть одобрены ответственным по закупкам
    (это может быть руководитель организации, начальник отдела закупок и другое ответственное лицо) и начальником
    подразделения (начальником цеха, руководителем организации). Процесс, включающий
    в себя параллельное согласование, представлен на схеме ниже. Данная схема отрисована с учетом настроек в HubEx.
</p>

<div>
    <img style="margin: 0 auto; display: block; max-width: 100%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Parallel1.jpg"/>
</div>

<p>Обратите внимание на стадии со звездочкой: <strong>Согласована начальником подразделения</strong> и <strong>Согласована начальником
    подразделения*</strong> - одинаковые по
    смыслу, но в
    HubEx необходимо создать именно две разных стадии. Обе стадии предназначены для одного согласующего лица, но на
    разных ветках процесса для этих стадий должны быть настроены разные уведомления. Также в зависимости от
    местонахождения стадии в процессе, они имеют разные точки выхода - продолжение процедуры согласования или ее
    завершение.</p>

<p>Тоже самое касается и стадий <strong>Согласована ответственным по закупкам</strong> и <strong>Согласована
    ответственным по закупкам*</strong>.</p>


<p>Схема процесс согласования является подготовительным этапом перед <a href="#settings2">настройкой процедуры параллельного
    согласования</a> - из нее мы четко видим
    процесс, можем выделить <strong>Стадии заявки</strong>, понять настройку жизненного цикла и увидеть, на каких Стадиях и кому должны
    приходить
    уведомления.</p>
<p>Теперь пройдемся по консоли администратора и настроим паралелльное согласование в HubEx.</p>


<h5 id="tickettype2">2.1. Тип заявки для параллельного согласования</h5>
<p>В примере мы будем использовать тот же <strong>Тип заявки</strong>, который использовался для примера <a
        href="#tickettype1">линейного согласования</a> - <strong>Закупка ТМЦ</strong>.</p>
<p>Но настройка <strong>Жизненного цикла</strong> будет отличаться. Для одного <strong>Типа заявки</strong> может быть настроен только один<strong> Жизненный
    цикл</strong>.</p>
<p>Подробнее
    читайте в стате: <a href="https://wiki.hubex.ru/docs/FAQ/RU/admin/TicketType.html">Типы заявок</a>.</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 60%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Type.jpg"/>
</div>

<p>Обратите внимание! Если вы используете <strong>Участки</strong>, их необходимо указывать в карточке <strong>Типа
    заявки</strong>. Подробнее
    читайте в статях: <a href="https://wiki.hubex.ru/docs/FAQ/RU/admin/Places.html">Настройка участков</a>, <a
            href="https://wiki.hubex.ru/docs/FAQ/RU/admin/TicketType.html">Типы заявок</a>. </p>


<h5 id="customeragreement2">2.2. Стадии заявки и настройка жизненного цикла для параллельного согласования</h5>
<p>В рамках данного примера считаем, что стадии <strong>Новая</strong>, <strong>Выполнена</strong> и
    <strong>Закрыта</strong> уже были созданы.</p>
<p>Для настройки параллельного согласования вам потребуется создать шесть новых стадий
    (если они не были созданы ранее) в меню
    консоли администратора <strong>Настройки заявки - Стадии заявки</strong>. Задайте стадиям различные цвета:</p>
<ul>
    <li>первую стадию назовем
        <strong>Согласование заявки</strong> - это стадия, на которую будет переводиться
        <strong>Заявка</strong>
        после ее создания (со стадии <strong>Новая</strong> на стадию <strong>Согласование заявки</strong>). Далее при переходе на эту стадию мы также
        настроим в
        отправку уведомлений двум ответственным о необходимости согласовать <strong>Заявку</strong>;
    </li>

    <p>
    <div>
        <img style="margin: 0 auto; display: block; max-width: 60%;"
             src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Stage1.jpg"/>
    </div>
    </p>


    <li><strong>Согласована начальником подразделения</strong> - на эту стадию может перейти только начальник
        подразделения и только со
        стадии <strong>Согласование заявки</strong>, а также при переводе <strong>Заявки</strong> на эту стадию второй ответственный за согласование
        должен получить уведомление о том, что первое согласующее лицо <strong>Заявку</strong> одобрило;
    </li>
    <p> <div>
    <img style="margin: 0 auto; display: block; max-width: 60%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Stage4.jpg"/>
</div>  </p>

    <li><strong>Согласована ответственным по закупкам</strong> - на эту стадию может перейти только ответственный по
        закупкам и только со
        стадии <strong>Согласование заявки</strong>, а также при переводе <strong>Заявки</strong> на эту стадию второй ответственный за согласование
        должен получить уведомление о том, что первое согласующее лицо <strong>Заявку</strong> одобрило;
    </li>

    <p> <div>
    <img style="margin: 0 auto; display: block; max-width: 60%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Stage6.jpg"/>
</div>  </p>

    <li><strong>Согласована ответственным по закупкам*</strong> - на эту стадию может перейти только ответственный по
        закупкам и только со
        стадии <strong>Согласована начальником подразделения</strong>, а также при переводе <strong>Заявки</strong> на эту стадию инициатор <strong>Заявки</strong>
        получает уведомление, что оба ответственных лица согласовали <strong>Заявку</strong>;
    </li>
    <p> <div>
    <img style="margin: 0 auto; display: block; max-width: 60%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Stage7.jpg"/>
</div> </p>

    <li><strong>Согласована начальником подразделения*</strong> - на эту стадию может перейти только начальник
        подразделения и только со
        стадии <strong>Согласована ответственным по закупкам</strong>, а также при переводе <strong>Заявки</strong> на эту стадию инициатор <strong>Заявки</strong>
        получает уведомление, что оба ответственных лица согласовали <strong>Заявку</strong>;
    </li>
    <p> <div>
    <img style="margin: 0 auto; display: block; max-width: 60%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Stage5.jpg"/>
</div>
    </p>
    <li><strong>Не согласована</strong> - если ответственные отказываются
        подтверждать <strong>Заявку</strong>, то ее переводят на стадию <strong>Не согласована</strong> с любой из предыдущих пяти
        стадий. В настройке жизненного цикла переход на эту стадию мы сделаем доступным только
        для
        роли <strong>Ответственного по закупкам</strong> и <strong>Начальника подразделения</strong>.
    </li>
    <p>
    <div>
        <img style="margin: 0 auto; display: block; max-width: 60%;"
             src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Stage3.jpg"/>
    </div>
    </p>
</ul>


<p>Для настройки переходов по стадиям необходимо настроить жизненный цикл заявки.</p>

<p>Сделать это можно в меню <strong>Настройки заявки - Жизненный цикл заявки</strong>: </p>
<ul>
    <li>в поле <strong>Тип заявки</strong> выберите созданный ранее тип <strong>Закупка ТМЦ</strong>;
    </li>
    <li>для маршрута укажите начальную стадию <strong>Новая</strong>, конечную стадию <strong>Закрыта</strong>. Эти стадии должны быть заранее созданы.
        Подробнее читайте в статье: <a href="https://wiki.hubex.ru/docs/FAQ/RU/admin/TicketLifeCycle.html">Жизненный
            цикл заявки</a>;
    </li>
    <li>со стадии <strong>Новая</strong> в настройках переходов между стадиями по кнопке <strong>+Добавить
        стадию</strong> добавьте
        переход на стадию <strong>Согласование заявки</strong>;
    </li>
    <li>в поле <strong>Название перехода</strong> укажите <strong>На согласовании</strong>. <strong>Название
        перехода</strong> - название кнопки в мобильном
        приложении инженера;
    </li>
    <li>в поле <strong>Ветка жизненного цикла</strong> выберите <strong>Ветка согласования</strong>. Заявки на ветке
        согласования будут отображаться в отдельно вкладке в мобильном приложении;
    </li>
    <li id="auto2">в настройках перехода также можно установить флажок <strong>Выполнить автоматический переход</strong>
        и задать
        время перехода, например, 5 минут.
        Благодаря этой настройке <strong>Заявка</strong> автоматически через 5 минут перейдет на стадию <strong>Согласование
            заявки</strong>.
        Далее при переходе на эту стадию мы также настроим в
        отправку уведомления ответственному лицу о необходимости согласовать <strong>Заявку</strong>;
    </li>
    <p><div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/LC1.jpg"/>
</div>  </p>

    <li>нажмите кнопку <strong>Сохранить</strong>;</li>
    <li>затем у стадии <strong>Согласование заявки</strong> нажмите кнопку <strong>Далее</strong> и добавьте переходы на
        стадии <strong>
            Согласована начальником подразделения</strong>, <strong>Согласована ответственным по закупкам</strong> и
        <strong>Не согласована</strong> с
        соответствующими названиями переходов;
    </li>
    <p><div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/LC2.jpg"/>
</div>  </p>

    <li>В поле <strong>Ветка жизненного цикла заявки</strong> для стадий <strong>
        Согласована начальником подразделения</strong>, <strong>Согласована ответственным по закупкам</strong> можно
        выбрать значение <strong>Ветка согласования</strong>, для стадии <strong>Не согласована</strong> можно указать
        значение <strong>Основная
            ветка</strong>.

        <p>Обратите внимание! Здесь мы не настраиваем автоматический переход. Переводить <strong>Заявку</strong> на эти
            стадии пользователь будет вручную.</p>
    </li>

    <li>установите флажок <strong>Предоставить доступ отдельным ролям</strong> и укажите роли: для стадии <strong>Согласована
        ответственным по закупкам</strong> - <strong>
        Ответственный по закупкам</strong> и для стадии <strong>
        Согласована начальником подразделения</strong> - <strong>Начальник подразделения</strong>, т.к. эти стадии
        должны быть доступны
        только для ответственных за согласование. Для стадии <strong>Не согласована</strong> укажите обе этих <strong>Роли</strong>.

        <p><strong>Роли</strong> вы можете выбрать другие, в зависимости от уже созданных в вашем
            тенанте - это могут быть <strong>Руководитель</strong>, <strong>Начальник отдела</strong> и т.д. Выбранная <strong>Роль</strong> должна быть указана в
            карточке пользователей - ответственных, которые будут согласовать <strong>Заявки</strong>. Подробнее читайте в
            статьях: <a href="https://wiki.hubex.ru/docs/FAQ/RU/admin/Roles.html">Настройка ролей</a>, <a
                    href="https://wiki.hubex.ru/docs/FAQ/RU/user/CreatingUser.html">Создание пользователя вашей
                системы</a>.</p>
    </li>
    <p><div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/LC3-1.jpg"/>
</div>  </p>
    <p>
    <div>
        <img style="margin: 0 auto; display: block; max-width: 95%;"
             src="/attachments/images/FAQ/ADMIN/TicketsAgreement/LC3-2.jpg"/>
    </div>
    </p>

    <p>
    <div>
        <img style="margin: 0 auto; display: block; max-width: 95%;"
             src="/attachments/images/FAQ/ADMIN/TicketsAgreement/LC4-1.jpg"/>
    </div>
    </p>


    <li>со стадии <strong>Согласована начальником подразделения</strong> настройте переход на стадию <strong>Согласована
        ответственным по закупкам*</strong> (со звездочкой!) и на стадию <strong>Не согласована</strong>.
    </li>
    <li>В поле <strong>Ветка жизненного цикла заявки</strong> для стадий <strong>Согласована
        ответственным по закупкам*</strong> можно
        выбрать значение <strong>Ветка согласования</strong>, для стадии <strong>Не согласована</strong> можно указать
        значение <strong>Основная
            ветка</strong>.
    </li>

    <li>установите флажок <strong>Предоставить доступ отдельным ролям</strong> и укажите роли: для стадии <strong>Согласована
        ответственным по закупкам*</strong> и для стадии <strong>Не согласована</strong> - <strong>
        Ответственный по закупкам</strong>. Т.к. на этой ветке перейти на обе этих стадии может только <strong>Ответственный по
        закупкам</strong>.

        <p><strong>Роли</strong> вы можете выбрать другие, в зависимости от уже созданных в вашем
            тенанте - это могут быть <strong>Руководитель</strong>, <strong>Начальник отдела</strong> и т.д. Выбранная <strong>Роль</strong> должна быть указана в
            карточке пользователей - ответственных, которые будут согласовать <strong>Заявки</strong>. Подробнее читайте в
            статьях: <a href="https://wiki.hubex.ru/docs/FAQ/RU/admin/Roles.html">Настройка ролей</a>, <a
                    href="https://wiki.hubex.ru/docs/FAQ/RU/user/CreatingUser.html">Создание пользователя вашей
                системы</a>.</p>
    </li>
    <p> <div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/LC4-2.jpg"/>
</div>  </p>

    <p>
    <div>
        <img style="margin: 0 auto; display: block; max-width: 95%;"
             src="/attachments/images/FAQ/ADMIN/TicketsAgreement/LC4-3.jpg"/>
    </div>
    </p>



    <li>со стадии <strong>Согласована
        ответственным по закупкам</strong> настройте переход на стадию <strong>Согласована начальником
        подразделения*</strong> (со звездочкой!) и на стадию <strong>Не согласована</strong>.
    </li>
    <li>в поле <strong>Ветка жизненного цикла заявки</strong> для стадий <strong>Согласована начальником
        подразделения*</strong> можно
        выбрать значение <strong>Ветка согласования</strong>, для стадии <strong>Не согласована</strong> можно указать
        значение <strong>Основная
            ветка</strong>.
    </li>

    <li>установите флажок <strong>Предоставить доступ отдельным ролям</strong> и укажите роли: для стадии <strong>Согласована
        начальником подразделения*</strong> и для стадии <strong>Не согласована</strong> - <strong>
        Начальник подразделения</strong>. Т.к. на этой ветке перейти на обе этих стадии может только <strong>Начальник
        подразделения</strong>.

        <p><strong>Роли</strong> вы можете выбрать другие, в зависимости от уже созданных в вашем
            тенанте - это могут быть <strong>Руководитель</strong>, <strong>Начальник отдела</strong> и т.д. Выбранная <strong>Роль</strong> должна быть указана в
            карточке пользователей - ответственных, которые будут согласовать <strong>Заявки</strong>. Подробнее читайте в
            статьях: <a href="https://wiki.hubex.ru/docs/FAQ/RU/admin/Roles.html">Настройка ролей</a>, <a
                    href="https://wiki.hubex.ru/docs/FAQ/RU/user/CreatingUser.html">Создание пользователя вашей
                системы</a>.</p>
    </li>
    <p><div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/LC4-4.jpg"/>
</div>  </p>
    <p>
    <div>
        <img style="margin: 0 auto; display: block; max-width: 95%;"
             src="/attachments/images/FAQ/ADMIN/TicketsAgreement/LC4-5.jpg"/>
    </div>
    </p>

</ul>


<p>Вы можете настроить дальнейшие переходы со стадий <strong>Согласована начальником
    подразделения*</strong> и <strong>Согласована
    ответственным по закупкам*</strong> на <strong>Выполнена</strong> и далее
    - <strong>Закрыта</strong>, со стадии
    <strong>Не согласована</strong>,
    например, на стадию <strong>Закрыта</strong> или <strong>На согласовании</strong> - для повторного согласования,
    после внесения изменений.</p>

<div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/LC5-1.jpg"/>
</div>

<h5 id="message2">2.3. Настройка оповещений для параллельного согласования</h5>
<p>Для простой схемы согласования можно настроить уведомления на пяти стадиях: </p>
<ul>
    <li><strong>Согласование заявки</strong> - на этой стадии можно отправить уведомление двум согласующим о том, что им необходимо
        согласовать <strong>Заявку</strong>;
    </li>
    <li><strong>Согласована начальником подразделения</strong> - на этой стадии можно отправить уведомление о том, что <strong>Начальник
        подразделения</strong> согласовал <strong>Заявку</strong>, и теперь <strong>Ответственному по закупкам</strong> также необходимо принять решение о
        согласовании;
    </li>
    <li><strong>Согласована ответственным по закупкам</strong> - на этой стадии можно отправить уведомление о том, что Ответственный по
        закупкам согласовал <strong>Заявку</strong>, и теперь <strong>Начальнику подразделения</strong> также необходимо принять решение о
        согласовании;
    </li>
    <li><strong>Согласована ответственным по закупкам*</strong> и <strong>Согласована начальником
        подразделения*</strong> - на этой стадии можно отправить инициатору <strong>Заявки</strong> о том, что оба ответственных
        согласовали <strong>Заявку</strong>;
    </li>
    <li><strong>Не согласована</strong> - на этой стадии можно отправить уведомление также инициатору <strong>Заявки</strong> об отказе в согласовании и
        предложении внести правки и отправить на повторное согласование.
    </li>
</ul>

<p>Сначала настроим оповещение для двух ответственных о том, что
    <strong>Заявку</strong> необходимо согласовать. Уведомление может прийти по электронной почте или в виде
    push-уведомления
    на телефон.</p>

<p>Перейдите в меню консоли <strong>Настройка оповещений - Правила выбора получателя</strong>. Создайте два новых
    правила с
    названием
    <strong>Уведомление о согласовании для ответственного по закупкам</strong> и <strong>Уведомление о согласовании для
        начальника подразделения</strong>. В поле <strong>Роль</strong>, которая
    получит уведомление выберите
    <strong>Ответственный по закупкам</strong>, а во втором правиле - <strong>Начальник подразделения</strong> сохраните
    правило.</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 60%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Rules.jpg"/>
</div>
<p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 60%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Rules3.jpg"/>
</div>
</p>

<p>Далее перейдите в меню <strong>Настройки оповещений - Триггеры уведомлений</strong>. Здесь настраивается условия
    получения уведомления
    и шаблон сообщения:</p>
<ul>
    <li id="trigger2">в <strong>Названии триггера</strong> напишите, например, <strong>Согласование для двух
        ответственных
        (email)</strong>;
    </li>
    <li>в поле <strong>Описание сообщения</strong> можно выбрать вариант шаблона, по которому будет составлен <strong>Заголовок
        сообщения</strong> и <strong>Текст сообщения</strong> в специальной разметке. Например, <strong>Уведомление о
        созданной заявке (Email)</strong>;
    </li>
    <li>в <strong>Заголовке сообщения</strong> подставится текст "Заявка №@Model.TaskNumber" (без кавычек);</li>
    <li>в поле <strong>Текст сообщения</strong> вы увидите текст в специальной разметке, в котором текстовые фразы можно
        изменить на свои - Требуется согласование заявки и т.д. (вы можете скопировать текст сообщения из этого примера):
        <p>&lt;table style="width: 650px; max-height: 300px;"&gt;
            &lt;tbody&gt;
            &lt;tr&gt;
            &lt;td&gt; &lt;p>Здравствуйте!&lt;/p&gt;
            &lt;p&gt;Требуется согласование заявки &lt;b&gt;№@Model.TaskNumber&lt;/b&gt; по объекту &lt;b&gt;@Model.AssetFullName&lt;/b&gt;.
            &lt;/p&gt;
            &lt;p&gt;Описание заявки:&lt;/p&gt;
            &lt;p&gt;@Model.TaskNotes.&lt;/p&gt;
            &lt;p&gt;Откройте заявку по ссылке @Model.NavigateToTaskForm().&lt;/p&gt;
            &lt;p style="margin-top: 20px; margin-bottom: 7px;"&gt;C уважением, Hubex&lt;/p&gt;&lt;a
            href="https://hubex.ru">&lt;img
            src="https://content.screencast.com/users/echinaek.val/folders/Capture/media/19d10631-5cd0-4726-9dce-9164f197fab9/LWR_Recording.png"
            alt="HubEx"/&gt;&lt;/a&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;/tbody&gt;
            &lt;/table&gt;
        </p>
    </li>

    <li>в поле <strong>Способ отправки сообщения</strong> выберите <strong>Email</strong>;</li>
    <li>в блоке <strong>Условия отправки</strong> в поле <strong>Стадии заявки</strong>, на которых будет отправлено
        уведомление выберите стадию
        <strong>Согласование заявки</strong> и установите флажки отправки по времени;
    </li>
    <li>добавьте два правила выбора получателя, которые мы создали выше - <strong>Уведомление о согласовании для
        ответственного по закупкам</strong>, <strong>Уведомление о согласовании для начальника подразделения</strong> и
        сохраните настройку
        триггера.
    </li>
</ul>
<div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Triggers4.jpg"/>
</div>

<p>Письмо по этому триггеру уведомление придет на почтовые адреса пользователей, чьи <strong>Роли</strong> былы указаны в правилах
    выбора. </p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 60%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Email.jpg"/>
</div>

<p>Далее настроим уведомление для <strong>Ответственного по закупкам</strong> и <strong>Начальника подразделения</strong>. Один из них должен всегда
    получать уведомление о том, что второй согласующий Заявку принял. </p>
<p>Мы будем использовать уже созданные ранее правила выбора - <strong>Уведомление о согласовании для
    ответственного по закупкам</strong>, <strong>Уведомление о согласовании для начальника подразделения</strong>.
    Создадим для них два новых триггера уведомления, т.к. текст сообщений для каждого из ответственных будет разный.
</p>

<p>В меню <strong>Настройки оповещений - Триггеры уведомлений</strong> создаем новый триггер. Здесь настраивается
    условия
    получения уведомления
    и шаблон сообщения:</p>
<ul>
    <li>в <strong>Названии триггера</strong> напишите, например, <strong>Согласование для ответственного по закупкам
        (email)</strong> - будем отправлять сообщение Ответственному по закупкам о том, что начальник подразделения уже
        согласовал Заявку;
    </li>
    <li>в поле <strong>Описание сообщения</strong> можно выбрать вариант шаблона, по которому будет составлен <strong>Заголовок
        сообщения</strong> и <strong>Текст сообщения</strong> в специальной разметке. Например, <strong>Уведомление о
        созданной заявке (Email)</strong>;
    </li>
    <li>в <strong>Заголовке сообщения</strong> подставится текст "Заявка №@Model.TaskNumber" (без кавычек);</li>
    <li>в поле <strong>Текст сообщения</strong> вы увидите текст в специальной разметке, в котором текстовые фразы можно
        изменить на свои - Требуется согласование заявки и т.д. (вы можете скопировать текст сообщения из этого примера):
        <p>&lt;table style="width: 650px; max-height: 300px;"&gt;
            &lt;tbody&gt;
            &lt;tr&gt;
            &lt;td&gt; &lt;p>Здравствуйте!&lt;/p&gt;
            &lt;p&gt;Заявка &lt;b&gt;№@Model.TaskNumber&lt;/b&gt; по объекту &lt;b&gt;@Model.AssetFullName&lt;/b&gt;
            была согласована начальником подразделения. Для завршения согласования требуется ваше подтверждение.
            &lt;/p&gt;
            &lt;p&gt;Описание заявки:&lt;/p&gt;
            &lt;p&gt;@Model.TaskNotes.&lt;/p&gt;
            &lt;p&gt;Откройте заявку по ссылке @Model.NavigateToTaskForm().&lt;/p&gt;
            &lt;p style="margin-top: 20px; margin-bottom: 7px;"&gt;C уважением, Hubex&lt;/p&gt;&lt;a
            href="https://hubex.ru">&lt;img
            src="https://content.screencast.com/users/echinaek.val/folders/Capture/media/19d10631-5cd0-4726-9dce-9164f197fab9/LWR_Recording.png"
            alt="HubEx"/&gt;&lt;/a&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;/tbody&gt;
            &lt;/table&gt;
        </p>
    </li>

    <li>в поле <strong>Способ отправки сообщения</strong> выберите <strong>Email</strong>;</li>
    <li>в блоке <strong>Условия отправки</strong> в поле <strong>Стадии заявки</strong>, на которых будет отправлено
        уведомление выберите стадию
        <strong>Согласована начальником подразделения</strong> и установите флажки отправки по времени;
    </li>
    <li>добавьте правило выбора получателя, которое мы создали выше - <strong>Уведомление о согласовании для
        ответственного по закупкам</strong> и
        сохраните настройку
        триггера.
    </li>
</ul>
<div>
    <img style="margin: 0 auto; display: block; max-width: 90%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Triggers5.jpg"/>
</div>

<p>Письмо по этому триггеру уведомление придет на почтовый адреса Ответственного по закупкам. </p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 80%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Email2.jpg"/>
</div>

<p>Аналогичным образом создается и настраивается триггер для начальника подразделения: в настройках укажите стадию - <strong>Согласована
    ответственным по закупкам</strong> и в тексте сообщения замените строку "была согласована начальником подразделения" на "была
    согласована ответственным по закупкам". В тексте сообщения вы можете указывать ФИО пользователей для более
    формализованного обращения. </p>


<p>После согласования обоими согласующими или отклонения согласования инициатор <strong>Заявки</strong> должен получить уведомление о
    принятом решении. Для
    этого необходимо созать новое <strong>Правило выбора получателя</strong> и два новых <strong>Триггера
        уведомлений</strong> (для стадий <strong>Согласована ответственным по закупкам*</strong>, <strong>Согласована
        начальником подразделения*</strong> - один и
    <strong>Не согласована</strong> - второй).</p>

<p>Обратите внимание! ФИО пользователя, инициирующего подачу <strong>Заявки</strong>, отображается в <strong>Заявке</strong>, в блоке <strong>Детальная информация</strong>
    - поле <strong>Иниициатор заявки</strong>. Доступ к полю может быть скрыт с помощью настройки доступа к полям в меню консоли
    администрирования <strong>Настройки заявки - Поля на форме заявки</strong>. Подробнее читайте в статье: <a
            href="https://wiki.hubex.ru/docs/FAQ/RU/admin/ElementsOfInterface.html">Поля на форме заявки: настройка
        доступа к полям заявки</a>.</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 90%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Initiator2.jpg"/>
</div>


<p>Для правила выбора установите название, например, <strong>Уведомление об итогах согласования для инициатора</strong>.
    В
    поле <strong>Получатели уведомления</strong> укажите параметр <strong>Обратившийся пользователь</strong> - т.е.
    инициатор подачи <strong>Заявки</strong>.
</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 60%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Rules2.jpg"/>
</div>


<p>Также создаем новые <strong>Триггеры уведомлений</strong>. Для стадий
    <strong>Согласована ответственным по закупкам*</strong> и <strong>Согласована начальником подразделения*</strong>
    будет один триггер и для стадии <strong>Не согласована</strong> - другой. В этих триггерах необходимо указать разный
    текст об итогах
    согласования и указать соответствующие стадии в настройках.</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Triggers6.jpg"/>
</div>

<p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Triggers7.jpg"/>
</div>
</p>
<p>Письмо по этим триггерам уведомлениий придет на почтовый адрес <strong>Ответственного по закупкам</strong>. Например, об удачном
    согласовании письмо будет выглядеть следуюим образом. </p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 80%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Email2.jpg"/>
</div>

<p>Далее рассмотрим поэтапно процесс согласования я web-приложении.</p>


<h5 id="web2">2.4. Процесс параллельного согласования в web-приложении</h5>
<p>Инициатор создает <strong>Заявку</strong> с типом <strong>Закупка ТМЦ</strong> и переводит ее на стадию <strong>Согласование заявки</strong> или
    дожидается автоматического перехода (который был <a href="#auto2">настроен в рамках жизненного цикла</a> для стадии
    <strong>Согласование заявки</strong>). </p>


<div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Ticket4.jpg"/>
</div>

<p>Оба ответственных за согласование (<strong>Ответственный по закупкам</strong> и <strong>Начальник подразделения</strong>) получают сообщение на
    электронную почту в
    формате, который мы указали в настроках <a href="#trigger2">триггера уведомлений</a>.</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 80%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Email5.jpg"/>
</div>

<p>Далее один из ответственных открывает <strong>Заявку</strong> (например, первым будет <strong>Начальник подразделения</strong>) и переводит ее либо на
    стадию <strong>Согласована начальником подразделения</strong>,
    либо <strong>Не
        согласована</strong>. </p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Ticket5.jpg"/>
</div>

<p>В случае, когда первый ответственный согласовал <strong>Заявку</strong>, второму (например, вторым будет <strong>Ответственный по закупкам</strong>) приходит уведомление, о
    том, что первый ответственный уже согласовал <strong>Заявку</strong> и требуется решение второго. </p>

<div>
    <img style="margin: 0 auto; display: block; max-width: 80%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Email3.jpg"/>
</div>

<p>Второй ответственный также открывает <strong>Заявку</strong> и переводит ее либо на
    стадию <strong>Согласована ответственным по закупкам*</strong> (со звездочкой),
    либо <strong>Не
        согласована</strong>.</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 95%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Ticket6.jpg"/>
</div>

<p id="">По результатам согласования инициатор Заявки получит сообщение на почту.</p>
<div>
    <img style="margin: 0 auto; display: block; max-width: 85%;"
         src="/attachments/images/FAQ/ADMIN/TicketsAgreement/Email4.jpg"/>
</div>
</body>


____
- [Перейти в меню](http://wiki.hubex.ru)
